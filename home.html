<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>High Stars Aimers - Home</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ------------------------------------- */
    /* Base & Utilities            */
    /* ------------------------------------- */
    :root {
        --primary-color: #2a2e92;
        --secondary-color: #00f0ff;
        --background-dark: #0a0f1f;
        --card-background: rgba(35, 40, 60, 0.8);
        --text-light: #e0e0e0;
        --border-color: rgba(0, 240, 255, 0.2);
    }
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', sans-serif;
        color: var(--text-light);
        background-color: var(--background-dark);
        transition: background-color 0.3s, color 0.3s;
    }
    * { box-sizing: border-box; }
    h1, h2, h3, h4 { color: var(--secondary-color); margin-bottom: 10px; }
    a { text-decoration: none; color: var(--secondary-color); }
    main {
        display: flex;
        height: calc(100vh - 60px); /* Adjust for header height */
    }
    
    /* ------------------------------------- */
    /* Header                 */
    /* ------------------------------------- */
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        background-color: var(--background-dark);
        border-bottom: 2px solid var(--secondary-color);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        position: sticky;
        top: 0;
        z-index: 1000;
        height: 60px;
    }
    .header h1 {
        font-size: 24px;
        margin: 0;
    }
    .header .user-menu {
        position: relative;
    }
    .user-menu .profile-btn {
        background: none;
        border: none;
        color: var(--secondary-color);
        font-size: 26px;
        cursor: pointer;
        transition: color 0.3s;
    }
    .user-menu .profile-btn:hover { color: white; }
    .dropdown-menu {
        position: absolute;
        top: 40px;
        right: 0;
        background-color: var(--card-background);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.4);
        display: none;
        flex-direction: column;
        z-index: 1000;
        min-width: 180px;
        overflow: hidden;
    }
    .dropdown-menu button {
        background: none;
        border: none;
        color: var(--text-light);
        padding: 12px 15px;
        text-align: left;
        cursor: pointer;
        transition: background-color 0.2s;
        font-size: 16px;
    }
    .dropdown-menu button:hover { background-color: rgba(0, 240, 255, 0.2); }
    .dropdown-menu button i { margin-right: 10px; }

    /* ------------------------------------- */
    /* Sidebar (Left Column)       */
    /* ------------------------------------- */
    .sidebar {
        width: 300px;
        background-color: rgba(10, 15, 31, 0.9);
        padding: 20px;
        border-right: 1px solid var(--border-color);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    .sidebar .user-profile {
        text-align: center;
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
    }
    .user-profile img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        border: 3px solid var(--secondary-color);
        object-fit: cover;
    }
    .user-profile h3 { margin-top: 10px; font-size: 1.5rem; }
    .user-profile p { font-size: 0.9rem; color: #aaa; }
    .sidebar-section {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
    }
    .sidebar-section h4 { margin-top: 0; }
    .progress-bar {
        height: 10px;
        background-color: rgba(255,255,255,0.2);
        border-radius: 5px;
        margin-top: 10px;
        overflow: hidden;
    }
    .progress-bar-fill {
        height: 100%;
        width: 75%; /* Example progress */
        background-color: var(--secondary-color);
        border-radius: 5px;
    }
    .quick-links-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
        gap: 10px;
        text-align: center;
    }
    .quick-links-grid a {
        display: block;
        padding: 15px 10px;
        background: var(--primary-color);
        border-radius: 8px;
        transition: transform 0.3s;
        font-size: 0.9rem;
    }
    .quick-links-grid a:hover { transform: translateY(-5px); background: #1e2478; }
    .quick-links-grid i { font-size: 1.5rem; margin-bottom: 5px; display: block; }
    .study-timer-display { font-size: 2.5rem; text-align: center; }
    .study-timer-controls { display: flex; justify-content: center; gap: 10px; margin-top: 15px; }
    .study-timer-controls button {
        padding: 8px 16px;
        font-size: 1rem;
        border-radius: 5px;
        border: none;
        cursor: pointer;
        background-color: var(--primary-color);
        color: white;
    }

    /* ------------------------------------- */
    /* Main Content (Right Column) */
    /* ------------------------------------- */
    .content-area {
        flex-grow: 1;
        padding: 20px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 25px;
        max-width: 900px;
        margin: 0 auto;
    }
    .announcement-banner {
        padding: 15px;
        background-color: var(--secondary-color);
        color: #333;
        text-align: center;
        font-weight: bold;
        border-radius: 8px;
        animation: pulse 2s infinite;
    }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.8; } }
    .search-bar {
        display: flex;
        gap: 10px;
    }
    .search-bar input {
        flex-grow: 1;
        padding: 10px 20px;
        border-radius: 25px;
        border: 2px solid var(--secondary-color);
        background-color: rgba(0, 0, 0, 0.2);
        color: var(--text-light);
        outline: none;
    }
    .search-bar button {
        padding: 10px 20px;
        border: none;
        background-color: var(--secondary-color);
        color: var(--background-dark);
        border-radius: 25px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .search-bar button:hover { background-color: #00c0cc; }
    .resource-card {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        gap: 10px;
        transition: transform 0.3s;
    }
    .resource-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 240, 255, 0.2); }
    .resource-card h4 {
        margin: 0;
        font-size: 1.2rem;
    }
    .resource-card .meta {
        font-size: 0.9rem;
        color: #aaa;
    }
    .resource-card .meta span { margin-right: 15px; }
    .resource-card .actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
    }
    .resource-card .actions button {
        padding: 8px 15px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s;
    }
    .resource-card .actions .view-btn {
        background-color: var(--primary-color);
        color: white;
    }
    .resource-card .actions .download-btn {
        background-color: var(--secondary-color);
        color: var(--background-dark);
    }
    .featured-resource {
        background: linear-gradient(45deg, #1e2478, #2a2e92);
        border: 2px solid var(--secondary-color);
    }
    
    /* ------------------------------------- */
    /* Footer                */
    /* ------------------------------------- */
    .footer {
        padding: 20px;
        background-color: var(--background-dark);
        text-align: center;
        border-top: 2px solid var(--secondary-color);
        color: #aaa;
    }
    .social-icons a {
        margin: 0 10px;
        font-size: 22px;
        color: var(--secondary-color);
        transition: transform 0.3s;
    }
    .social-icons a:hover { transform: scale(1.2); }

    /* ------------------------------------- */
    /* Responsive               */
    /* ------------------------------------- */
    @media (max-width: 900px) {
        main { flex-direction: column; }
        .sidebar {
            width: 100%;
            border-right: none;
            border-bottom: 1px solid var(--border-color);
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 15px;
        }
        .sidebar .user-profile, .sidebar-section {
            width: 45%;
            margin-bottom: 15px;
        }
        .user-profile img { width: 60px; height: 60px; }
        .user-profile h3 { font-size: 1.2rem; }
        .user-profile p { display: none; }
    }
    @media (max-width: 600px) {
        .sidebar { flex-direction: column; }
        .sidebar .user-profile, .sidebar-section { width: 100%; }
        .header h1 { font-size: 20px; }
    }
  </style>

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>
  
  <div class="header">
    <h1>High Stars Aimers</h1>
    <div class="user-menu">
        <button class="profile-btn" onclick="toggleDropdown()"><i class="fas fa-user-circle"></i></button>
        <div id="dropdownMenu" class="dropdown-menu">
            <button onclick="window.location.href='profile.html'"><i class="fas fa-user-cog"></i> Profile Settings</button>
            <button onclick="window.location.href='contact.html'"><i class="fas fa-headset"></i> Support</button>
            <button onclick="window.location.href='privacy.html'"><i class="fas fa-shield-alt"></i> Privacy & Policy</button>
            <button onclick="logout()"><i class="fas fa-sign-out-alt"></i> Sign Out</button>
        </div>
    </div>
  </div>
  
  <main>
    <aside class="sidebar">
        <div class="user-profile">
            <img id="userProfilePic" src="https://i.postimg.cc/85z11v37/user-profile-pic.png" alt="Profile Picture">
            <h3 id="welcomeMessage">Welcome, User!</h3>
            <p id="userEmail">Loading...</p>
        </div>
        
        <div class="sidebar-section">
            <h4>My Progress</h4>
            <div class="progress-bar">
                <div class="progress-bar-fill" style="width: 75%;"></div>
            </div>
            <small>75% of your learning goals completed!</small>
        </div>
        
        <div class="sidebar-section">
            <h4>Quick Links</h4>
            <div class="quick-links-grid">
                <a href="#" onclick="showContent('past-papers')"><i class="fas fa-book-open"></i><span>Papers</span></a>
                <a href="#" onclick="showContent('notes')"><i class="fas fa-clipboard-list"></i><span>Notes</span></a>
                <a href="#" onclick="showContent('quiz')"><i class="fas fa-question-circle"></i><span>Quiz</span></a>
                <a href="#" onclick="showContent('timer')"><i class="fas fa-clock"></i><span>Timer</span></a>
            </div>
        </div>
        
        <div class="sidebar-section">
            <h4>Today's Tip</h4>
            <p id="studyTip">"Break down large tasks into smaller, manageable chunks."</p>
        </div>
    </aside>
    
    <div class="content-area">
        <div class="announcement-banner">
            <i class="fas fa-bullhorn"></i> New updates are here! Check out the latest past papers.
        </div>
        
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search for papers or notes...">
            <button><i class="fas fa-search"></i> Search</button>
        </div>
        
        <div id="content-display">
            <h2 id="content-title">Featured Content</h2>
            
            <div class="resource-card featured-resource">
                <h4>KCSE 2024 Mathematics Paper</h4>
                <div class="meta">
                    <span><i class="fas fa-calendar-alt"></i> Year: 2024</span>
                    <span><i class="fas fa-tag"></i> Subject: Mathematics</span>
                    <span><i class="fas fa-dollar-sign"></i> Price: Free</span>
                </div>
                <div class="actions">
                    <button class="view-btn"><i class="fas fa-eye"></i> View</button>
                    <button class="download-btn"><i class="fas fa-download"></i> Download</button>
                </div>
            </div>
            
            </div>

        <div id="past-papers-section" class="table-section" style="display: none;">
            <h2>Past Papers</h2>
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Year</th>
                        <th>Subject</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="papers-table-body">
                    </tbody>
            </table>
        </div>

        <div id="notes-section" class="table-section" style="display: none;">
            <h2>Notes</h2>
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Year</th>
                        <th>Subject</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="notes-table-body">
                    </tbody>
            </table>
        </div>
    </div>
  </main>
  
  <footer class="footer">
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-youtube"></i></a>
      <a href="#"><i class="fab fa-tiktok"></i></a>
      <a href="#"><i class="fab fa-whatsapp"></i></a>
    </div>
    <div class="footer-links">
      <a href="#">About Us</a> | <a href="#">FAQs</a> | <a href="#">Terms & Conditions</a>
    </div>
    <p>&copy; <span id="currentYear"></span> High Stars Aimers. All Rights Reserved.</p>
  </footer>

  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyDhJD5Ux22U393z6RqT4Nv570jqoNrg7Xc",
      authDomain: "high-stars-aimers-5972f.firebaseapp.com",
      projectId: "high-stars-aimers-5972f",
      storageBucket: "high-stars-aimers-5972f.firebasestorage.app",
      messagingSenderId: "233345875942",
      appId: "1:233345875942:web:cf7610de84f0b2262ce027",
      measurementId: "G-X475KTSH5J"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // DOM Elements
    const dropdownMenu = document.getElementById('dropdownMenu');
    const contentDisplay = document.getElementById('content-display');
    const papersSection = document.getElementById('past-papers-section');
    const notesSection = document.getElementById('notes-section');
    const papersTableBody = document.getElementById('papers-table-body');
    const notesTableBody = document.getElementById('notes-table-body');
    const welcomeMessage = document.getElementById('welcomeMessage');
    const userEmail = document.getElementById('userEmail');

    // Toggle dropdown menu
    function toggleDropdown() {
      dropdownMenu.style.display = dropdownMenu.style.display === 'flex' ? 'none' : 'flex';
    }

    // Logout function
    function logout() {
      auth.signOut().then(() => {
        window.location.href = 'signin1.html';
      });
    }

    // Show specific content section
    function showContent(sectionId) {
        papersSection.style.display = 'none';
        notesSection.style.display = 'none';
        contentDisplay.style.display = 'none';

        if (sectionId === 'past-papers') {
            papersSection.style.display = 'block';
            loadResources('papers');
        } else if (sectionId === 'notes') {
            notesSection.style.display = 'block';
            loadResources('notes');
        } else if (sectionId === 'quiz' || sectionId === 'timer') {
             // Future implementation for quiz and timer display
            alert(`Feature for ${sectionId} coming soon!`);
        } else {
             contentDisplay.style.display = 'block';
        }
    }

    // Load resources from LocalStorage and display in table
    function loadResources(type) {
        const uploads = JSON.parse(localStorage.getItem('uploads') || '[]');
        const filteredUploads = uploads.filter(u => u.type === type);
        const tableBody = type === 'papers' ? papersTableBody : notesTableBody;
        tableBody.innerHTML = '';

        filteredUploads.forEach(u => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${u.title}</td>
                <td>${u.year}</td>
                <td>${u.subject}</td>
                <td>${u.price}</td>
                <td>
                    <button class="view-btn"><i class="fas fa-eye"></i> View</button>
                    <button class="download-btn"><i class="fas fa-download"></i> Download</button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    // On page load
    document.addEventListener('DOMContentLoaded', () => {
        const year = new Date().getFullYear();
        document.getElementById('currentYear').textContent = year;

        // Check user authentication
        auth.onAuthStateChanged(user => {
            if (user) {
                welcomeMessage.textContent = `Welcome, ${user.displayName || 'Learner'}!`;
                userEmail.textContent = user.email;
            } else {
                window.location.href = 'signin1.html';
            }
        });

        // Initialize with default content
        showContent('featured');
    });
  </script>

</body>
</html>
