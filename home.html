<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>High Stars Aimers - Home</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Global Variables and Base Styles */
    :root {
        --primary-color: #2a2e92;
        --secondary-color: #00f0ff;
        --background-dark: #0a0f1f;
        --card-background: rgba(35, 40, 60, 0.8);
        --text-light: #e0e0e0;
        --border-color: rgba(0, 240, 255, 0.2);
    }
    html, body {
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', sans-serif;
        color: var(--text-light);
        background-color: var(--background-dark);
        overflow-x: hidden;
    }
    * { box-sizing: border-box; }
    h1, h2, h3, h4 { color: var(--secondary-color); margin-bottom: 10px; }
    a { text-decoration: none; color: var(--secondary-color); }
    
    /* Layout Structure - Scrollable Page */
    main { 
        display: flex;
        min-height: calc(100vh - 60px); 
    }

    /* Header */
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        background-color: var(--background-dark);
        border-bottom: 2px solid var(--secondary-color);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        height: 60px;
        position: sticky;
        top: 0;
        z-index: 100;
    }
    .header h1 { font-size: 24px; margin: 0; }

    /* Sidebar */
    .sidebar {
        width: 300px;
        background-color: rgba(10, 15, 31, 0.9);
        padding: 20px;
        border-right: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        gap: 20px;
        position: sticky;
        top: 60px;
        height: calc(100vh - 60px);
        overflow-y: auto;
    }
    .sidebar .user-profile {
        text-align: center;
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
    }
    .user-profile img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        border: 3px solid var(--secondary-color);
        object-fit: cover;
    }
    .user-profile h3 { margin-top: 10px; font-size: 1.5rem; }
    .sidebar-section {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
    }
    .quick-links-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
        gap: 10px;
        text-align: center;
    }
    .quick-links-grid button {
        display: block;
        width: 100%;
        padding: 15px 10px;
        background: var(--primary-color);
        border: none;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.3s;
        font-size: 0.9rem;
    }
    .quick-links-grid button:hover { transform: translateY(-5px); background: #1e2478; }
    .quick-links-grid i { font-size: 1.5rem; margin-bottom: 5px; display: block; }

    /* Main Content Area */
    .content-area {
        flex-grow: 1;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 25px;
        max-width: 900px;
        margin: 0 auto;
        overflow-y: auto;
    }

    /* New professional sections */
    .announcement-banner {
        padding: 15px;
        background-color: var(--secondary-color);
        color: #333;
        text-align: center;
        font-weight: bold;
        border-radius: 8px;
    }

    .hero-section {
        text-align: center; 
        background-image: linear-gradient(rgba(42, 46, 146, 0.7), rgba(0, 240, 255, 0.2)), url('https://i.postimg.cc/Kz4Y6kXp/study-banner.jpg'); 
        background-size: cover; 
        background-position: center; 
        padding: 50px; 
        border-radius: 10px;
        color: var(--text-light);
    }
    .hero-section h2 { font-size: 2.5rem; }
    .hero-section p { font-size: 1.2rem; margin-bottom: 20px; }
    .hero-section button {
        padding: 12px 25px; 
        font-size: 1.1rem; 
        background-color: var(--secondary-color); 
        color: var(--background-dark); 
        border: none; 
        border-radius: 25px; 
        cursor: pointer; 
        font-weight: bold;
        transition: transform 0.3s;
    }
    .hero-section button:hover { transform: translateY(-3px); }

    .search-section {
        display: flex;
        gap: 10px;
        background: var(--card-background);
        border-radius: 10px;
        padding: 15px;
        border: 1px solid var(--border-color);
    }
    .search-section input {
        flex-grow: 1;
        padding: 12px;
        border-radius: 25px;
        border: 1px solid var(--border-color);
        background: rgba(10, 15, 31, 0.8);
        color: white;
    }
    .search-section button {
        padding: 12px 25px;
        border-radius: 25px;
        background: var(--primary-color);
        color: white;
        border: none;
        cursor: pointer;
    }

    .selection-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 100%;
    }

    .explore-section {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
        cursor: pointer;
        transition: transform 0.3s;
        text-align: center;
    }
    .explore-section:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 240, 255, 0.2);
    }

    .back-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        margin-bottom: 20px;
        cursor: pointer;
        transition: 0.3s;
        align-self: flex-start;
    }
    .back-btn:hover { background: #1e2478; }

    .resource-card {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        gap: 10px;
        transition: transform 0.3s;
        cursor: pointer;
        text-align: center;
    }
    .resource-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 240, 255, 0.2); }
    .resource-card h4 { margin: 0; font-size: 1.2rem; }
    .resource-card .meta { font-size: 0.9rem; color: #aaa; }
    .resource-card .meta span { margin-right: 15px; }
    .resource-card .actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
        justify-content: center;
    }
    .resource-card .actions button,
    .resource-card .actions a {
        padding: 8px 15px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s;
    }
    .resource-card .actions .view-btn {
        background-color: var(--primary-color);
        color: white;
    }
    .resource-card .actions .download-btn {
        background-color: var(--secondary-color);
        color: var(--background-dark);
    }
    .featured-resource {
        background: linear-gradient(45deg, #1e2478, #2a2e92);
        border: 2px solid var(--secondary-color);
        cursor: default;
    }
    .featured-resource:hover {
        transform: none;
        box-shadow: none;
    }
    .featured-resource .meta i {
        color: #ccc;
    }

    /* New Timer styles */
    .timer-card {
        background: var(--card-background);
        border-radius: 10px;
        padding: 30px;
        text-align: center;
        margin-top: 20px;
        border: 1px solid var(--border-color);
    }
    .timer-display {
        font-size: 4rem;
        font-weight: bold;
        color: var(--secondary-color);
        margin-bottom: 20px;
    }
    .timer-controls button {
        padding: 12px 25px;
        font-size: 1rem;
        font-weight: bold;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        margin: 0 10px;
    }
    .start-btn { background-color: #28a745; color: white; }
    .stop-btn { background-color: #dc3545; color: white; }
    .reset-btn { background-color: #007bff; color: white; }

    /* Footer */
    .footer {
        padding: 20px;
        background-color: var(--background-dark);
        text-align: center;
        border-top: 2px solid var(--secondary-color);
        color: #aaa;
    }
    .social-icons a {
        margin: 0 10px;
        font-size: 22px;
        color: var(--secondary-color);
        transition: transform 0.3s;
    }
    .social-icons a:hover { transform: scale(1.2); }

    /* Fix: Mobile Responsive Styles */
    @media (max-width: 900px) {
        main { flex-direction: column; }
        .sidebar {
            width: 100%;
            border-right: none;
            border-bottom: 1px solid var(--border-color);
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 15px;
            height: auto;
            position: static;
        }
        .sidebar .user-profile { width: 100%; }
        /* Fix: Sidebar sections now take up full width on mobile */
        .sidebar-section { width: 100%; margin-bottom: 15px; }
    }
    /* View states for dynamic content */
    /* All views are hidden by default, except the one displayed on page load */
    .view-home, .view-subjects, .view-years, .view-terms, .view-resources { display: none; }
    .view-home { display: block; }

    /* Additional professional styling for new elements */
    #feedback-form textarea {
        background: rgba(10, 15, 31, 0.8); 
        color: white; 
        border: 1px solid var(--border-color); 
        border-radius: 5px; 
        padding: 10px;
        height: 100px;
        resize: vertical;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

  <div class="header">
    <h1>High Stars Aimers</h1>
    <div>
        <button onclick="logout()" style="background: var(--primary-color); color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-sign-out-alt"></i> Sign Out
        </button>
    </div>
  </div>

  <main>
    <aside class="sidebar">
        <div class="user-profile">
            <img id="userProfilePic" src="https://i.postimg.cc/RZwkQnq3/Cam-Scanner-06-25-2025-19-04-4.jpg" alt="Profile Picture">
            <h3 id="welcomeMessage">Welcome, User!</h3>
            <p id="userEmail">student@email.com</p>
        </div>

        <div class="sidebar-section">
            <h4>Quick Links</h4>
            <div class="quick-links-grid">
                <button onclick="showHome()"><i class="fas fa-home"></i><span>Home</span></button>
                <button onclick="showSubjects()"><i class="fas fa-book"></i><span>Browse</span></button>
                <button onclick="showQuiz()"><i class="fas fa-question-circle"></i><span>Quiz</span></button>
                <button onclick="showTimer()"><i class="fas fa-clock"></i><span>Timer</span></button>
            </div>
        </div>

        <div class="sidebar-section">
            <h4>Today's Tip</h4>
            <p>"Break down large tasks into smaller, manageable chunks."</p>
        </div>
    </aside>

    <div class="content-area">
        <div class="hero-section">
            <h2>Your Journey to Academic Excellence Starts Here</h2>
            <p>Access a world of past papers, quizzes, and study tools to ace your exams.</p>
            <button onclick="showSubjects()">
                Start Browse <i class="fas fa-arrow-right"></i>
            </button>
        </div>

        <div class="search-section">
            <input type="text" id="searchInput" placeholder="Search for a subject, year, or topic...">
            <button onclick="searchResources()">
                <i class="fas fa-search"></i>
            </button>
        </div>
        
        <div class="sidebar-section">
            <h4><i class="fas fa-history"></i> Recently Viewed</h4>
            <p>Mathematics Term 1 2024</p>
            <p>Physics Term 3 2023</p>
        </div>

        <div id="home-view" class="view-home">
            <h2>browse resources</h2>
            <div class="resource-card" onclick="showSubjects()">
                <h4><i class="fas fa-search"></i> browse by subject</h4>
                <p>explore our comprehensive collection of past papers organized by subject, year, and term.</p>
            </div>
        </div>

        <div id="subjects-view" class="view-subjects">
            <h2>browse by subject</h2>
            <button class="back-btn" onclick="showHome()">
                <i class="fas fa-home"></i> back to home
            </button>
            <div class="selection-container" id="subjects-container">
            </div>
        </div>

        <div id="years-view" class="view-years">
            <h2 id="years-title">browse by year</h2>
            <button class="back-btn" onclick="showSubjects()">
                <i class="fas fa-arrow-left"></i> back to subjects
            </button>
            <div class="selection-container" id="years-container">
            </div>
        </div>

        <div id="terms-view" class="view-terms">
            <h2 id="terms-title">browse by term</h2>
            <button class="back-btn" onclick="showYears(currentSubject)">
                <i class="fas fa-arrow-left"></i> back to years
            </button>
            <div class="selection-container" id="terms-container">
            </div>
        </div>

        <div id="resources-view" class="view-resources">
            <h2 id="resources-title">resources</h2>
            <button class="back-btn" onclick="showTerms(currentSubject, currentYear)">
                <i class="fas fa-arrow-left"></i> back to terms
            </button>
            <div class="selection-container" id="resources-container">
            </div>
        </div>

        <div id="quiz-view" class="view-quiz" style="display: none;">
            <h2>Quiz Master</h2>
            <button class="back-btn" onclick="showHome()"><i class="fas fa-arrow-left"></i> Back to Home</button>
            <div class="resource-card">
                <h4>Quiz Coming Soon!</h4>
                <p>A fun and interactive quiz section is under development. Stay tuned for updates!</p>
            </div>
        </div>

        <div id="timer-view" class="view-timer" style="display: none;">
            <h2>Study Timer</h2>
            <button class="back-btn" onclick="showHome()"><i class="fas fa-arrow-left"></i> Back to Home</button>
            <div class="timer-card">
                <h4>Set a Study Session Timer</h4>
                <p>Use the timer below to manage your study time effectively.</p>
                <div class="timer-display" id="timer-display">00:00:00</div>
                <div class="timer-controls">
                    <button class="start-btn" onclick="startTimer()"><i class="fas fa-play"></i> Start</button>
                    <button class="stop-btn" onclick="stopTimer()"><i class="fas fa-stop"></i> Stop</button>
                    <button class="reset-btn" onclick="resetTimer()"><i class="fas fa-redo"></i> Reset</button>
                </div>
            </div>
        </div>
        
        <div class="sidebar-section">
            <h4><i class="fas fa-comment-alt"></i> Give Us Feedback</h4>
            <form id="feedback-form" style="display: flex; flex-direction: column; gap: 10px;">
                <textarea placeholder="Your feedback..."></textarea>
                <button type="submit" style="background: var(--primary-color); color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer;">
                    Submit
                </button>
            </form>
        </div>
    </div>
  </main>

  <footer class="footer">
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-youtube"></i></a>
      <a href="#"><i class="fab fa-tiktok"></i></a>
      <a href="#"><i class="fab fa-whatsapp"></i></a>
    </div>
    <div class="footer-links">
      <a href="#">About Us</a> | <a href="#">FAQs</a> | <a href="#">Terms & Conditions</a>
    </div>
    <p>&copy; 2024 High Stars Aimers. All Rights Reserved.</p>
  </footer>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDhJD5Ux22U393z6RqT4Nv570jqoNrg7Xc",
      authDomain: "high-stars-aimers-5972f.firebaseapp.com",
      projectId: "high-stars-aimers-5972f",
      storageBucket: "high-stars-aimers-5972f.firebasestorage.app",
      messagingSenderId: "233345875942",
      appId: "1:233345875942:web:cf7610de84f0b2262ce027",
      measurementId: "G-X475KTSH5J"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    let currentSubject = '';
    let currentYear = '';
    let currentTerm = '';

    // Timer variables
    let timerInterval;
    let timerSeconds = 0;
    const timerDisplay = document.getElementById('timer-display');

    function updateTimerDisplay() {
        const hours = Math.floor(timerSeconds / 3600);
        const minutes = Math.floor((timerSeconds % 3600) / 60);
        const seconds = timerSeconds % 60;

        const pad = (num) => String(num).padStart(2, '0');
        timerDisplay.textContent = `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
    }

    function startTimer() {
        if (!timerInterval) {
            timerInterval = setInterval(() => {
                timerSeconds++;
                updateTimerDisplay();
            }, 1000);
        }
    }

    function stopTimer() {
        clearInterval(timerInterval);
        timerInterval = null;
    }

    function resetTimer() {
        stopTimer();
        timerSeconds = 0;
        updateTimerDisplay();
    }
    
    function hideAllViews() {
        document.getElementById('home-view').style.display = 'none';
        document.getElementById('subjects-view').style.display = 'none';
        document.getElementById('years-view').style.display = 'none';
        document.getElementById('terms-view').style.display = 'none';
        document.getElementById('resources-view').style.display = 'none';
        document.getElementById('quiz-view').style.display = 'none';
        document.getElementById('timer-view').style.display = 'none';
    }

    function showHome() {
        console.log('Showing home view');
        hideAllViews();
        document.getElementById('home-view').style.display = 'block';
    }

    function showSubjects() {
        console.log('Showing subjects view');
        hideAllViews();
        document.getElementById('subjects-view').style.display = 'block';

        const subjectsContainer = document.getElementById('subjects-container');
        subjectsContainer.innerHTML = '';

        const subjects = ["Mathematics", "Physics", "Chemistry", "Biology", "Computer Studies", "Technical Drawing", "General Science"];
        subjects.forEach(subject => {
            subjectsContainer.innerHTML += `
                <div class="explore-section" onclick="showYears('${subject}')">
                    <h4><i class="fas fa-book"></i> ${subject}</h4>
                    <p>Browse ${subject} past papers and resources</p>
                </div>
            `;
        });
    }

    function showYears(subject) {
        console.log('Showing years for:', subject);
        currentSubject = subject;
       