<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>High Stars Aimers - Home</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
        --primary-color: #2a2e92;
        --secondary-color: #00f0ff;
        --background-dark: #0a0f1f;
        --card-background: rgba(35, 40, 60, 0.8);
        --text-light: #e0e0e0;
        --border-color: rgba(0, 240, 255, 0.2);
    }
    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: 'Segoe UI', sans-serif;
        color: var(--text-light);
        background-color: var(--background-dark);
    }
    * { box-sizing: border-box; }
    h1, h2, h3, h4 { color: var(--secondary-color); margin-bottom: 10px; }
    a { text-decoration: none; color: var(--secondary-color); }
    main { display: flex; height: calc(100vh - 60px); }
    
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        background-color: var(--background-dark);
        border-bottom: 2px solid var(--secondary-color);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        height: 60px;
    }
    .header h1 { font-size: 24px; margin: 0; }
    
    .sidebar {
        width: 300px;
        background-color: rgba(10, 15, 31, 0.9);
        padding: 20px;
        border-right: 1px solid var(--border-color);
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 20px;
    }
    .sidebar .user-profile {
        text-align: center;
        margin-bottom: 20px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border-color);
    }
    .user-profile img {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        border: 3px solid var(--secondary-color);
        object-fit: cover;
    }
    .user-profile h3 { margin-top: 10px; font-size: 1.5rem; }
    .sidebar-section {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
    }
    .quick-links-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
        gap: 10px;
        text-align: center;
    }
    .quick-links-grid button {
        display: block;
        width: 100%;
        padding: 15px 10px;
        background: var(--primary-color);
        border: none;
        color: white;
        border-radius: 8px;
        cursor: pointer;
        transition: transform 0.3s;
        font-size: 0.9rem;
    }
    .quick-links-grid button:hover { transform: translateY(-5px); background: #1e2478; }
    .quick-links-grid i { font-size: 1.5rem; margin-bottom: 5px; display: block; }
    
    .content-area {
        flex-grow: 1;
        padding: 20px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
        gap: 25px;
        max-width: 900px;
        margin: 0 auto;
    }
    .announcement-banner {
        padding: 15px;
        background-color: var(--secondary-color);
        color: #333;
        text-align: center;
        font-weight: bold;
        border-radius: 8px;
    }
    
    .selection-container {
        display: flex;
        flex-direction: column;
        gap: 15px;
        width: 100%;
    }
    
    .explore-section {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
        cursor: pointer;
        transition: transform 0.3s;
        text-align: center;
    }
    .explore-section:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 240, 255, 0.2);
    }
    
    .back-btn {
        background: var(--primary-color);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        margin-bottom: 20px;
        cursor: pointer;
        transition: 0.3s;
        align-self: flex-start;
    }
    .back-btn:hover { background: #1e2478; }
    
    .resource-card {
        background: var(--card-background);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        gap: 10px;
        transition: transform 0.3s;
        cursor: pointer;
        text-align: center;
    }
    .resource-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 240, 255, 0.2); }
    .resource-card h4 { margin: 0; font-size: 1.2rem; }
    .resource-card .meta { font-size: 0.9rem; color: #aaa; }
    .resource-card .meta span { margin-right: 15px; }
    .resource-card .actions {
        display: flex;
        gap: 10px;
        margin-top: 10px;
        justify-content: center;
    }
    .resource-card .actions button {
        padding: 8px 15px;
        border-radius: 20px;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s;
    }
    .resource-card .actions .view-btn {
        background-color: var(--primary-color);
        color: white;
    }
    .resource-card .actions .download-btn {
        background-color: var(--secondary-color);
        color: var(--background-dark);
    }
    .featured-resource {
        background: linear-gradient(45deg, #1e2478, #2a2e92);
        border: 2px solid var(--secondary-color);
    }

    .footer {
        padding: 20px;
        background-color: var(--background-dark);
        text-align: center;
        border-top: 2px solid var(--secondary-color);
        color: #aaa;
    }
    .social-icons a {
        margin: 0 10px;
        font-size: 22px;
        color: var(--secondary-color);
        transition: transform 0.3s;
    }
    .social-icons a:hover { transform: scale(1.2); }

    /* View states */
    .view-home { display: block; }
    .view-subjects { display: none; }
    .view-years { display: none; }
    .view-terms { display: none; }
    .view-resources { display: none; }
    
    @media (max-width: 900px) {
        main { flex-direction: column; }
        .sidebar {
            width: 100%;
            border-right: none;
            border-bottom: 1px solid var(--border-color);
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: space-around;
            padding: 15px;
        }
        .sidebar .user-profile, .sidebar-section {
            width: 45%;
            margin-bottom: 15px;
        }
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>
  
  <div class="header">
    <h1>High Stars Aimers</h1>
    <div>
        <button onclick="logout()" style="background: var(--primary-color); color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer;">
            <i class="fas fa-sign-out-alt"></i> Sign Out
        </button>
    </div>
  </div>
  
  <main>
    <aside class="sidebar">
        <div class="user-profile">
            <img id="userProfilePic" src="https://i.postimg.cc/RZwkQnq3/Cam-Scanner-06-25-2025-19-04-4.jpg" alt="Profile Picture">
            <h3 id="welcomeMessage">Welcome, User!</h3>
            <p id="userEmail">student@email.com</p>
        </div>
        
        <div class="sidebar-section">
            <h4>Quick Links</h4>
            <div class="quick-links-grid">
                <button onclick="showHome()"><i class="fas fa-home"></i><span>Home</span></button>
                <button onclick="showSubjects()"><i class="fas fa-book"></i><span>Browse</span></button>
                <button onclick="alert('Quiz feature coming soon!')"><i class="fas fa-question-circle"></i><span>Quiz</span></button>
                <button onclick="alert('Timer feature coming soon!')"><i class="fas fa-clock"></i><span>Timer</span></button>
            </div>
        </div>
        
        <div class="sidebar-section">
            <h4>Today's Tip</h4>
            <p>"Break down large tasks into smaller, manageable chunks."</p>
        </div>
    </aside>
    
    <div class="content-area">
        <div class="announcement-banner">
            <i class="fas fa-bullhorn"></i> New updates are here! Check out the latest past papers.
        </div>
        
        <div id="home-view" class="view-home">
            <h2>Featured Content</h2>
            <div class="resource-card featured-resource">
                <h4>KCSE 2024 Mathematics Paper</h4>
                <p style="font-style: italic; color: #ccc;">A comprehensive paper from the latest KCSE exams, focusing on core concepts.</p>
                <div class="meta">
                    <span><i class="fas fa-calendar-alt"></i> Year: 2024</span>
                    <span><i class="fas fa-tag"></i> Subject: Mathematics</span>
                    <span><i class="fas fa-dollar-sign"></i> Price: Free</span>
                </div>
                <div class="actions">
                    <button class="view-btn"><i class="fas fa-eye"></i> View</button>
                    <button class="download-btn" onclick="downloadFile('https://example.com/math2024.pdf', 'KCSE_2024_Mathematics.pdf')"><i class="fas fa-download"></i> Download</button>
                </div>
            </div>
            
            <h2>Browse Resources</h2>
            <div class="resource-card" onclick="showSubjects()">
                <h4><i class="fas fa-search"></i> Browse by Subject</h4>
                <p>Explore our comprehensive collection of past papers organized by subject, year, and term.</p>
            </div>
        </div>

        <div id="subjects-view" class="view-subjects">
            <h2>Browse by Subject</h2>
            <button class="back-btn" onclick="showHome()">
                <i class="fas fa-home"></i> Back to Home
            </button>
            <div class="selection-container" id="subjects-container">
                </div>
        </div>

        <div id="years-view" class="view-years">
            <h2 id="years-title">Browse by Year</h2>
            <button class="back-btn" onclick="showSubjects()">
                <i class="fas fa-arrow-left"></i> Back to Subjects
            </button>
            <div class="selection-container" id="years-container">
                </div>
        </div>

        <div id="terms-view" class="view-terms">
            <h2 id="terms-title">Browse by Term</h2>
            <button class="back-btn" onclick="showYears(currentSubject)">
                <i class="fas fa-arrow-left"></i> Back to Years
            </button>
            <div class="selection-container" id="terms-container">
                </div>
        </div>

        <div id="resources-view" class="view-resources">
            <h2 id="resources-title">Resources</h2>
            <button class="back-btn" onclick="showTerms(currentSubject, currentYear)">
                <i class="fas fa-arrow-left"></i> Back to Terms
            </button>
            <div class="selection-container" id="resources-container">
                </div>
        </div>
    </div>
  </main>
  
  <footer class="footer">
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="#"><i class="fab fa-youtube"></i></a>
      <a href="#"><i class="fab fa-tiktok"></i></a>
      <a href="#"><i class="fab fa-whatsapp"></i></a>
    </div>
    <div class="footer-links">
      <a href="#">About Us</a> | <a href="#">FAQs</a> | <a href="#">Terms & Conditions</a>
    </div>
    <p>&copy; 2024 High Stars Aimers. All Rights Reserved.</p>
  </footer>

  <script>
    // ADDED: Firebase configuration and initialization
    const firebaseConfig = {
      apiKey: "AIzaSyDhJD5Ux22U393z6RqT4Nv570jqoNrg7Xc",
      authDomain: "high-stars-aimers-5972f.firebaseapp.com",
      projectId: "high-stars-aimers-5972f",
      storageBucket: "high-stars-aimers-5972f.firebasestorage.app",
      messagingSenderId: "233345875942",
      appId: "1:233345875942:web:cf7610de84f0b2262ce027",
      measurementId: "G-X475KTSH5J"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Global variables to track current state
    let currentSubject = '';
    let currentYear = '';
    let currentTerm = '';

    // Sample resources data
    const sampleResources = [
        { name: "Mathematics Paper 1", type: "Exam Paper", subject: "Mathematics", year: "2024", term: "Term 1", url: "https://example.com/math1.pdf" },
        { name: "Mathematics Paper 2", type: "Exam Paper", subject: "Mathematics", year: "2024", term: "Term 1", url: "https://example.com/math2.pdf" },
        { name: "English Paper 1", type: "Exam Paper", subject: "English", year: "2024", term: "Term 1", url: "https://example.com/english1.pdf" },
        { name: "Physics Paper 1", type: "Exam Paper", subject: "Science", year: "2023", term: "Term 2", url: "https://example.com/physics1.pdf" },
    ];

    // View management functions
    function hideAllViews() {
        document.getElementById('home-view').style.display = 'none';
        document.getElementById('subjects-view').style.display = 'none';
        document.getElementById('years-view').style.display = 'none';
        document.getElementById('terms-view').style.display = 'none';
        document.getElementById('resources-view').style.display = 'none';
    }

    function showHome() {
        console.log('Showing home view');
        hideAllViews();
        document.getElementById('home-view').style.display = 'block';
    }

    // UPDATED: Function to show STEM subjects dynamically
    function showSubjects() {
        console.log('Showing subjects view');
        hideAllViews();
        document.getElementById('subjects-view').style.display = 'block';

        const subjectsContainer = document.getElementById('subjects-container');
        subjectsContainer.innerHTML = '';
        
        // This is the STEM-only list you requested
        const subjects = ["Mathematics", "Physics", "Chemistry", "Biology", "Computer Studies", "Technical Drawing", "General Science"];
        subjects.forEach(subject => {
            subjectsContainer.innerHTML += `
                <div class="explore-section" onclick="showYears('${subject}')">
                    <h4><i class="fas fa-book"></i> ${subject}</h4>
                    <p>Browse ${subject} past papers and resources</p>
                </div>
            `;
        });
    }

    function showYears(subject) {
        console.log('Showing years for:', subject);
        currentSubject = subject;
        hideAllViews();
        
        document.getElementById('years-title').textContent = `Browse ${subject} by Year`;
        document.getElementById('years-view').style.display = 'block';
        
        const yearsContainer = document.getElementById('years-container');
        yearsContainer.innerHTML = '';
        
        const years = [2024, 2023, 2022, 2021, 2020];
        years.forEach(year => {
            yearsContainer.innerHTML += `
                <div class="explore-section" onclick="showTerms('${subject}', '${year}')">
                    <h4><i class="fas fa-calendar-alt"></i> ${year}</h4>
                    <p>${subject} papers from ${year}</p>
                </div>
            `;
        });
    }

    function showTerms(subject, year) {
        console.log('Showing terms for:', subject, year);
        currentSubject = subject;
        currentYear = year;
        hideAllViews();
        
        document.getElementById('terms-title').textContent = `Browse ${subject} ${year} by Term`;
        document.getElementById('terms-view').style.display = 'block';
        
        const termsContainer = document.getElementById('terms-container');
        termsContainer.innerHTML = '';
        
        const terms = ["Term 1", "Term 2", "Term 3"];
        terms.forEach(term => {
            termsContainer.innerHTML += `
                <div class="explore-section" onclick="showResources('${subject}', '${year}', '${term}')">
                    <h4><i class="fas fa-folder"></i> ${term}</h4>
                    <p>${subject} ${year} ${term} papers</p>
                </div>
            `;
        });
    }

    function showResources(subject, year, term) {
        console.log('Showing resources for:', subject, year, term);
        currentSubject = subject;
        currentYear = year;
        currentTerm = term;
        hideAllViews();
        
        document.getElementById('resources-title').textContent = `${subject} ${year} ${term} Resources`;
        document.getElementById('resources-view').style.display = 'block';
        
        const resourcesContainer = document.getElementById('resources-container');
        resourcesContainer.innerHTML = '';
        
        // Filter resources based on criteria
        const filteredResources = sampleResources.filter(resource => 
            resource.subject === subject && resource.year === year && resource.term === term
        );
        
        if (filteredResources.length === 0) {
            resourcesContainer.innerHTML = `
                <div class="resource-card">
                    <h4>No resources found</h4>
                    <p>No resources available for ${subject} ${year} ${term}. Check back later for updates.</p>
                </div>
            `;
        } else {
            filteredResources.forEach(resource => {
                resourcesContainer.innerHTML += `
                    <div class="resource-card">
                        <h4>${resource.name}</h4>
                        <div class="meta">
                            <span><i class="fas fa-tag"></i> Type: ${resource.type}</span>
                            <span><i class="fas fa-calendar"></i> ${resource.year} ${resource.term}</span>
                        </div>
                        <div class="actions">
                            <button class="view-btn"><i class="fas fa-eye"></i> View</button>
                            <button class="download-btn" onclick="downloadFile('${resource.url}', '${resource.name}.pdf')"><i class="fas fa-download"></i> Download</button>
                        </div>
                    </div>
                `;
            });
        }
    }

    function downloadFile(url, fileName) {
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }

    // UPDATED: Logout function now uses Firebase authentication
    function logout() {
      auth.signOut().then(() => {
        window.location.href = 'signin1.html';
      });
    }

    // UPDATED: Initialize the page with Firebase authentication check
    document.addEventListener('DOMContentLoaded', () => {
        const year = new Date().getFullYear();
        document.querySelector('p:last-of-type').textContent = `Â© ${year} High Stars Aimers. All Rights Reserved.`;
        
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('welcomeMessage').textContent = `Welcome, ${user.displayName || 'Learner'}!`;
                document.getElementById('userEmail').textContent = user.email;
                document.getElementById('userProfilePic').src = user.photoURL || 'https://i.postimg.cc/RZwkQnq3/Cam-Scanner-06-25-2025-19-04-4.jpg';
                showHome();
            } else {
                window.location.href = 'signin1.html';
            }
        });
    });
  </script>

</body>
</html>
